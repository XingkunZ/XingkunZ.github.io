<!DOCTYPE html>





<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/kun.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/kun.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/kun.png?v=7.4.1">
  <link rel="mask-icon" href="/images/kun.svg?v=7.4.1" color="#222">
  <link rel="alternate" href="/atom.xml" title="kun" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: "",
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="程序员要为架构抗争！随着软件周期的推移，软件修改要付出的代价会越来越大。软件架构的目标是希望以最少的人力满足构建和维护该系统的需求，延缓软件腐化的趋势。关于对架构的误解澄清：高层的架构并不能脱离细节实现的设计。高层架构和低层设计不分你我。">
<meta name="keywords" content="读书笔记,软件">
<meta property="og:type" content="article">
<meta property="og:title" content="《架构整洁之道》笔记">
<meta property="og:url" content="https://xingkunz.github.io/2021/12/18/《架构整洁之道》笔记/index.html">
<meta property="og:site_name" content="kun">
<meta property="og:description" content="程序员要为架构抗争！随着软件周期的推移，软件修改要付出的代价会越来越大。软件架构的目标是希望以最少的人力满足构建和维护该系统的需求，延缓软件腐化的趋势。关于对架构的误解澄清：高层的架构并不能脱离细节实现的设计。高层架构和低层设计不分你我。">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2022-01-09T15:09:23.612Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="《架构整洁之道》笔记">
<meta name="twitter:description" content="程序员要为架构抗争！随着软件周期的推移，软件修改要付出的代价会越来越大。软件架构的目标是希望以最少的人力满足构建和维护该系统的需求，延缓软件腐化的趋势。关于对架构的误解澄清：高层的架构并不能脱离细节实现的设计。高层架构和低层设计不分你我。">
  <link rel="canonical" href="https://xingkunz.github.io/2021/12/18/《架构整洁之道》笔记/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>《架构整洁之道》笔记 | kun</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">kun</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="https://xingkunz.github.io/2021/12/18/《架构整洁之道》笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XingkunZ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kun">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">《架构整洁之道》笔记

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2021-12-18 20:55:15" itemprop="dateCreated datePublished" datetime="2021-12-18T20:55:15+08:00">2021-12-18</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-09 23:09:23" itemprop="dateModified" datetime="2022-01-09T23:09:23+08:00">2022-01-09</time>
              </span>
            
          

          
            <span id="/2021/12/18/《架构整洁之道》笔记/" class="post-meta-item leancloud_visitors" data-flag-title="《架构整洁之道》笔记" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2021/12/18/《架构整洁之道》笔记/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2021/12/18/《架构整洁之道》笔记/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="程序员要为架构抗争！"><a href="#程序员要为架构抗争！" class="headerlink" title="程序员要为架构抗争！"></a>程序员要为架构抗争！</h1><p>随着软件周期的推移，软件修改要付出的代价会越来越大。软件架构的目标是希望以最少的人力满足构建和维护该系统的需求，延缓软件腐化的趋势。</p><p>关于对架构的误解澄清：高层的架构并不能脱离细节实现的设计。高层架构和低层设计不分你我。</p><a id="more"></a>

<p>从两个价值维度描述软件价值：</p>
<ul>
<li>系统的行为。体现为程序员赶功能交付。</li>
<li>架构灵活性。体现为程序员重构或寻找优秀的设计。</li>
</ul>
<p>对于这两个永恒的矛盾，程序员应当能够对任务做规划：重要又紧急，重要但不紧急，不重要但紧急，不重要也不紧急。架构往往就是重要但不紧急的事情，程序员如果具备足够的架构自信，应当为架构做抗争，比如说服权力争取时间做架构和重构，争取不到至少也可以尝试调整需求的上线顺序。这种抗争在公司中是永无止境的。</p>
<h1 id="编程范式"><a href="#编程范式" class="headerlink" title="编程范式"></a>编程范式</h1><h2 id="结构化编程"><a href="#结构化编程" class="headerlink" title="结构化编程"></a>结构化编程</h2><p>结构化编程对程序控制权的直接转移进行了限制和规范。</p>
<p>Dijkstra于1968年提出结构化编程，他认为goto这种无限制跳转的语句会损害程序整体结构。推荐使用if/then/else/do/while/until语句。</p>
<p><strong>为什么说goto是有害的？</strong>Dijkstra认为可以借鉴数学推导的方法去证明程序的正确性，程序员可以用一些以证明可用的程序结构串联起来，证明额外的程序是正确的，进而就可以推导出整个程序的正确性。但是goto语句的存在就会导致模块无法被拆分成为更小的、可证明的单元。</p>
<p><strong>目前采用的是科学证明法。</strong>科学理论的特点就是，可以被证伪，但无法被证实。现在我们用大量的测试用例去排查bug，如果找不到bug，那么我们的程序可以看作是正确的。</p>
<h2 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h2><p>面向对象编程对程序控制权的间接转移进行了限制和规范。</p>
<p>封装，就是把数据和函数圈起来，对外暴露必要的方法，而数据不可见。</p>
<p>继承，把子类伪装成父类的衍生体，实际上没有做出什么程序的新改造，但是提供了数据结构的伪装性和遍历性。</p>
<p>多态，实际上是对函数指针的运用。多态将原来顺序执行且顺序依赖的程序做出了调整，将其依赖反转（依赖关系与控制流的反转）。程序运行时调用的某接口是虚的，真正调用的接口不受控制流影响，可以独立变化。这样程序就可以做到业务代码与数据库、用户界面的解耦。<strong>非常有帮助！</strong></p>
<h2 id="函数式编程"><a href="#函数式编程" class="headerlink" title="函数式编程"></a>函数式编程</h2><p>函数式编程对程序中的赋值进行了限制和规范。</p>
<p>函数式编程语言中的变量是不可变的，变量不可变，就不会出现死锁、竞争、并发问题。更适合用于系统中的不可变组件。</p>
<h1 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h1><h2 id="SRP-单一职责原则"><a href="#SRP-单一职责原则" class="headerlink" title="SRP 单一职责原则"></a>SRP 单一职责原则</h2><p>一般会被大家简单理解为：一个函数只完成一个功能。</p>
<p>实际上，单一职责原则是：任何一个软件模块都应该只对某一类行为者负责。</p>
<p>我比较喜欢记住这个解释：任何一个软件模块都应该有且只有一个被修改的原因。当一组人对一些数据有共同的责任时，那这些数据的处理适合放在同一个地方管理，如果放在不同的地方，那么模块就会相互依赖。</p>
<h2 id="OCP-开闭原则"><a href="#OCP-开闭原则" class="headerlink" title="OCP 开闭原则"></a>OCP 开闭原则</h2><p>软件要易于扩展，抗拒修改（限制每次被修改所影响的范围）。</p>
<p>常见的实施过程是：先划分按照需求进行功能分组(SRP)，然后调整这些分组之间的依赖关系。即将系统划分为一系列组件，并且将这些组件间的依赖关系按层次结构进行组织，使得高层组件不会因为底层组件被修改而受到影响。</p>
<p>在控制组件之间的影响时要注意，组件不应该依赖其不直接使用的组件。如果不直接使用，应当给组件设计一个外观，阻隔外来的调用。</p>
<h2 id="LSP-里氏替换原则"><a href="#LSP-里氏替换原则" class="headerlink" title="LSP 里氏替换原则"></a>LSP 里氏替换原则</h2><p>对一个类进行的操作来说，当这个类替换成其衍生类时，操作仍然保持合理。</p>
<p>比如，正方形为矩形的子类，那么修改矩形边长的setter操作就违法了LSP原则，因为正方形子类的长宽不可任意修改。</p>
<p>以我的理解，LSP限制说明的观点是，如果父类的操作不能适用于子类，那么这个方法或者这个继承关系本身就不是合理的。当外界想要对子类操作时，还要专门加以区分，这样就徒增工作量了。</p>
<h2 id="ISP-接口隔离原则"><a href="#ISP-接口隔离原则" class="headerlink" title="ISP 接口隔离原则"></a>ISP 接口隔离原则</h2><p>如果多个用户的调用的操作都放在了一起，那么这一个大组件的修改就牵一发而动全身，是不好的。ISP要做的就是给操作增加一个专门针对每个用户的操作接口，这样每个用户只依赖自己所需的那个接口，而不是把别人的操作也依赖了。</p>
<h2 id="DIP-依赖反转原则"><a href="#DIP-依赖反转原则" class="headerlink" title="DIP 依赖反转原则"></a>DIP 依赖反转原则</h2><p>依赖抽象而不是依赖具体实现。</p>
<p>如果有一些具体实现的代码总是变动，那么依赖这些代码的模块会非常辛苦，他们最好依赖抽象。比如硬件时常更新、电脑连接的外设总是变化，那么操作系统或者软件依赖的最好是一个虚拟的外设，这样就可以阻隔外界的变化，等真正用到的时候，再给这些虚拟的外设指定好具体是哪个外设。</p>
<p>例如工厂模式。</p>
<h1 id="组件构建原则"><a href="#组件构建原则" class="headerlink" title="组件构建原则"></a>组件构建原则</h1><p>设计原则指导我们如何用砖块砌成房间，组件构建原则指导我们如何将房间组合成房子。</p>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><p>组件是软件的部署单元，是完成部署的最小实体。</p>
<blockquote>
<p>我本来以为这一章讲的是划分软件设计层面的抽象组件，结果真的是编译器层面的部署单元。</p>
</blockquote>
<p>组件是一组二进制文件的集合，多个组件可以链接成一个独立可执行文件。可以独立部署，也可以独立开发。</p>
<p>最开始的时候，编译器效率比较低下，存取缓慢。那么代码越多，占用的内存越多，编译过程就越长。那么程序员就将库函数的源代码单独编译，指定一个内存中的加载地址，编译好就放在这里。之后编译应用程序文件的时候，可以先加载二进制形式的库文件过来，再加载应用程序。</p>
<p>后来，函数库的函数不断增加的时候，就要重新划分加载的上限了。随着内存扩大，程序的碎片化程度会随之不断增加。这就出现了重定位技术：可以指定编译出的二进制格式文件加载到任意地址。</p>
<p>再后来，程序员将加载过程和链接过程分离。链接器输出一个完成了外部链接、可以重定位的二进制文件。</p>
<p>程序规模的墨菲定律：程序规模会一直增长下去，直到将有限的编译和链接时间填满为止。</p>
<h2 id="组件聚合"><a href="#组件聚合" class="headerlink" title="组件聚合"></a>组件聚合</h2><p>三个描述组件之间关系的原则。</p>
<h3 id="REP：复用-发布等同原则"><a href="#REP：复用-发布等同原则" class="headerlink" title="REP：复用/发布等同原则"></a>REP：复用/发布等同原则</h3><p>：软件复用的最小粒度应等同于其发布的最小粒度。</p>
<p>就是说，组件中的类与模块必须是紧密相关的，要有一个共同的主题或大方向。</p>
<p>而且，一个组件中包含的类和模块应该可以一起发布，用一条版本线跟踪。</p>
<h3 id="CCP：共同闭包原则"><a href="#CCP：共同闭包原则" class="headerlink" title="CCP：共同闭包原则"></a>CCP：共同闭包原则</h3><p>：要把可能会同时修改、为相同目的修改的类放在一个组件中。</p>
<p>即，SRP原则的组件层面版本。</p>
<h3 id="CRP：共同复用原则"><a href="#CRP：共同复用原则" class="headerlink" title="CRP：共同复用原则"></a>CRP：共同复用原则</h3><p>不要强迫一个组件的用户依赖他们不需要的东西。</p>
<p>和ISP原则类似，就是不要依赖不需要的东西。</p>
<h3 id="三个原则综合考虑：组件聚合张力"><a href="#三个原则综合考虑：组件聚合张力" class="headerlink" title="三个原则综合考虑：组件聚合张力"></a>三个原则综合考虑：组件聚合张力</h3><pre class="mermaid">graph LR
    rep[复用发布等同原则]
    ccp[共同闭包原则]
    crp[共同复用原则]
    rep---|太多不必要的发布|ccp
    rep---|太多组件变更|crp
    ccp---|复用困难|crp</pre>

<p>REP、CCP原则是黏合性原则（组件变大），CRP是排除性原则（组件变小）。</p>
<p>一个软件的开发过程中，它的组件结构会在这个三角区域中不断变动。</p>
<h2 id="组件耦合"><a href="#组件耦合" class="headerlink" title="组件耦合"></a>组件耦合</h2><h3 id="无依赖环原则"><a href="#无依赖环原则" class="headerlink" title="无依赖环原则"></a>无依赖环原则</h3><p>：组件依赖关系中不应该出现环。</p>
<p>组件依赖关系应该可以转换成一个有向无环图DAG。</p>
<h3 id="消除循环依赖"><a href="#消除循环依赖" class="headerlink" title="消除循环依赖"></a>消除循环依赖</h3><p>将依赖图转化为DAG。应用以下两种机制：</p>
<ol>
<li>应用依赖反转原则DIP。将一个依赖改为依赖接口，通过实现接口来倒置依赖。</li>
<li>创建一个新组件。</li>
</ol>
<h3 id="自上而下的设计"><a href="#自上而下的设计" class="headerlink" title="自上而下的设计"></a>自上而下的设计</h3><p>组件结构图不可能从上而下地设计出来。这里的上是指抽象，下是指具体。</p>
<p>组件依赖结构图主要是针对构建性、维护性方面的设计图，用来指导如何隔离软件频繁的变更。所以在项目开始不会被设计出来，是因为开始的时候不需要被构建和维护。</p>
<h3 id="SDP：稳定依赖原则"><a href="#SDP：稳定依赖原则" class="headerlink" title="SDP：稳定依赖原则"></a>SDP：稳定依赖原则</h3><p>：依赖关系要指向更稳定的方向。</p>
<p>按照我的想法，稳定是相对的、是有“历史局限性”的。我们要做的是尽可能识别到自己所见范围内最稳定的地方，作为我们依赖的对象。</p>
<p>看看另一个好落实的稳定依赖方案：</p>
<p>量化一个组件的稳定性：稳定性指标（I）。I=0表示最稳定。<br>$$<br>I={Fanout}\div{(Fanin + Fanout)},I\in[0,1]\<br>Fanout=出度依赖,Fanin=入度依赖<br>$$<br>稳定依赖原则要求让每个组件的I指标都大于其所依赖的组件的I指标。</p>
<h3 id="SAP：稳定抽象原则"><a href="#SAP：稳定抽象原则" class="headerlink" title="SAP：稳定抽象原则"></a>SAP：稳定抽象原则</h3><p>：一个组件的抽象化程度应该与其稳定性保持一致。</p>
<p>意思就是说，在这个原则当中，组件的稳定性与抽象化程度被关联起来了——一个稳定的组件同时也应该是抽象的，这样这个组件就可以被灵活地扩展且不需修改。</p>
<p>所以SAP让SDP有了落实的方法。两个结合起来就是：依赖关系应该指向更抽象的方向。也就是组件版的DIP原则。</p>
<p>量化抽象程度：A。A=0表示最具体。<br>$$<br>A=Na\div{Nc}, A\in[0,1]\<br>Na=组件中类的数量，Nc=组件中抽象类和接口的数量。<br>$$</p>
<h3 id="稳定与抽象的讨论"><a href="#稳定与抽象的讨论" class="headerlink" title="稳定与抽象的讨论"></a>稳定与抽象的讨论</h3><p>I与A在实现软件的时候应该成反比，就是说稳定的应当写为抽象（所以方便扩展）、不稳定的写的是具体的实现（它依赖的是抽象）。软件越靠近这个反比的线条，在稳定和抽象的程度上就把握得越合理。</p>
<p>如果一个组件处于又稳定又具体的位置，那么写代码就很痛苦，因为他不好修改、不好扩展。如果组件处于不稳定又抽象的地方，那他就没有什么好扩展的，没用。</p>
<blockquote>
<p>书里的这部分，感觉作者本人觉得自己发明了两个概念很了不起，叭叭地延展了一堆，等我耐心看完他那一堆概念和公式，觉得自己好像被耍了，因为他也没讲出什么有趣的道理。</p>
</blockquote>
<h1 id="软件架构"><a href="#软件架构" class="headerlink" title="软件架构"></a>软件架构</h1><h2 id="架构师的定位"><a href="#架构师的定位" class="headerlink" title="架构师的定位"></a>架构师的定位</h2><p>工作实质：规划如何将系统切分为组件，并安排好组件之间的排列关系，以及组件之间互相通信的方式。</p>
<p>目的：更好地对组件开发、部署、运行、维护。</p>
<p>如果想设计一个更方便推进各项工作的系统，策略就是在设计中尽可能长时间地保留尽可能多的可选项。</p>
<h2 id="开发的角度"><a href="#开发的角度" class="headerlink" title="开发的角度"></a>开发的角度</h2><p>难以开发的系统也不会健康长久。</p>
<p>架构设计要适应开发团队的结构，或者说架构设计最后也会慢慢适应团队结构。</p>
<p>对于多个小组的开发团队，系统要有划分清晰的组件和可靠稳定的接口。</p>
<h2 id="部署的角度"><a href="#部署的角度" class="headerlink" title="部署的角度"></a>部署的角度</h2><p>一般来说，一个系统的部署成本越高，可用性就越低。软件架构的目标是要实现一键式的轻松部署。</p>
<h2 id="运行的角度"><a href="#运行的角度" class="headerlink" title="运行的角度"></a>运行的角度</h2><p>软件架构对系统运行的影响没有前面的几个大。优化重心应该放在开发、部署和维护。</p>
<p>良好的软件架构应该能明确地反映该系统在运行时的需求。就是说开发人员可以通过架构可以了解运行过程，简化对系统的理解。</p>
<h2 id="维护的角度"><a href="#维护的角度" class="headerlink" title="维护的角度"></a>维护的角度</h2><p>维护成本是最高的。成本一，我们在现有系统中寻找在哪里新增功能、修改问题的时间和经历。成本二，修改代码时可能的衍生问题。</p>
<h2 id="保持可选项"><a href="#保持可选项" class="headerlink" title="保持可选项"></a>保持可选项</h2><p>保留可选项就是说让软件维持其灵活和便捷的“软”性。</p>
<p>保留什么可选项？就是那些无关紧要的细节设计。</p>
<p>这里的细节设计是相对于软件的核心策略所说的。软件可以分为策略和细节，策略包括软件中所有业务规则和操作过程，就是系统的价值所在。细节是人与系统交互中不影响策略本身的一些行为，比如数据库、I/O设备等。</p>
<p>架构让这些细节与策略脱离开，推迟这些具体的决策过程。</p>
<p>一个优秀的架构师应该致力于最大化可选项数量。</p>

    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/读书笔记/" rel="tag"># 读书笔记</a>
            
              <a href="/tags/软件/" rel="tag"># 软件</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2021/10/21/《重构》读书笔记/" rel="next" title="《重构》读书笔记">
                  <i class="fa fa-chevron-left"></i> 《重构》读书笔记
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="comments"></div>
  

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#程序员要为架构抗争！"><span class="nav-text">程序员要为架构抗争！</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编程范式"><span class="nav-text">编程范式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#结构化编程"><span class="nav-text">结构化编程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#面向对象编程"><span class="nav-text">面向对象编程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数式编程"><span class="nav-text">函数式编程</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#设计原则"><span class="nav-text">设计原则</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SRP-单一职责原则"><span class="nav-text">SRP 单一职责原则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OCP-开闭原则"><span class="nav-text">OCP 开闭原则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LSP-里氏替换原则"><span class="nav-text">LSP 里氏替换原则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ISP-接口隔离原则"><span class="nav-text">ISP 接口隔离原则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DIP-依赖反转原则"><span class="nav-text">DIP 依赖反转原则</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#组件构建原则"><span class="nav-text">组件构建原则</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#组件"><span class="nav-text">组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组件聚合"><span class="nav-text">组件聚合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#REP：复用-发布等同原则"><span class="nav-text">REP：复用/发布等同原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CCP：共同闭包原则"><span class="nav-text">CCP：共同闭包原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CRP：共同复用原则"><span class="nav-text">CRP：共同复用原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三个原则综合考虑：组件聚合张力"><span class="nav-text">三个原则综合考虑：组件聚合张力</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组件耦合"><span class="nav-text">组件耦合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#无依赖环原则"><span class="nav-text">无依赖环原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#消除循环依赖"><span class="nav-text">消除循环依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自上而下的设计"><span class="nav-text">自上而下的设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SDP：稳定依赖原则"><span class="nav-text">SDP：稳定依赖原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SAP：稳定抽象原则"><span class="nav-text">SAP：稳定抽象原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#稳定与抽象的讨论"><span class="nav-text">稳定与抽象的讨论</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#软件架构"><span class="nav-text">软件架构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#架构师的定位"><span class="nav-text">架构师的定位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开发的角度"><span class="nav-text">开发的角度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#部署的角度"><span class="nav-text">部署的角度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运行的角度"><span class="nav-text">运行的角度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#维护的角度"><span class="nav-text">维护的角度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#保持可选项"><span class="nav-text">保持可选项</span></a></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">XingkunZ</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XingkunZ</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.4.1</div>


  <script src='https://unpkg.com/mermaid@8.8.4/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize(JSON.stringify());
    }
  </script>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/muse.js?v=7.4.1"></script>
<script src="/js/next-boot.js?v=7.4.1"></script>



  

















<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme: 'forest',
      logLevel: 3,
      flowchart: { curve: 'linear' },
      gantt: { axisFormat: '%m/%d/%Y' },
      sequence: { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>




  

  

  

  


<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'Pjstp83mhOuOGVRgfQH9Wy8d-gzGzoHsz',
    appKey: 'kpMNCJPyBxzPPgGwUuPhpbY7',
    placeholder: 'Bite me.',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: true,
    lang: '' || 'zh-cn',
    path: location.pathname,
    recordIP: false,
    serverURLs: ''
  });
}, window.Valine);
</script>

</body>
</html>
